# 4.1.6 쿼리 실행 구조

MySQL에서 쿼리가 실행되는 과정은 MySQL Engine과 Storage Engine의 영역으로 나눌 수 있다.

## 1. 쿼리 파서
사용자의 요청으로 들어온 쿼리 문장을 토큰으로 분리해 트리 형태의 구조로 만들어내는 작업을 한다.    

쿼리 문장의 기본 문법 오류는 이 과정에서 발견되고 사용자에게 오류 메세지를 통보한다.

## 2. 전처리기
파서 과정에서 만들어진 파서 트리를 기반으로 쿼리 문장에 구조적인 문제점이 있는지 확인한다.   

각 토큰을 테이블 이름이나 칼럼 이름 또는 내장 함수와 같은 개체를 매핑해 해당 객체의 존재 여부와 객체의 접근 권한을 등을 확인하는 과정을 이 단계에서 수행한다.

## 3. 옵티마이저
사용자의 요청으로 들어온 쿼리 문장을 어떻게 저렴한 비용으로 빠르게 처리할지를 결정하는 역할을 담당한다.

## 4. 실행 엔진
옵티마이저의 명령을 받아서 핸들러에게 전달한다.    
각 핸들러에게 요청해서 받은 결과를 또 다른 핸들러 요청의 입력으로 연결하는 역할을 수행한다.

## 5. 핸들러(스토리지 엔진)
MySQL 실행 엔진의 요청에 따라 데이터를 디스크로 저장하고 디스크로부터 읽어오는 역할을 수행한다.      
핸들러는 결국 스토리지 엔진을 의미한다.




