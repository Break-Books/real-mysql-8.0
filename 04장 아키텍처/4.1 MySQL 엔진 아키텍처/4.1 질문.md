# 4.1 MySQL 엔진 아키텍처

### MySQL의 아키텍처와 Spring 의 레이어드 아키텍처와 유사한 점은 무엇인가요?

**첫번째, 레이어별로 관심사를 분리하여 느슨한 결합을 가져간다.**

스토리지 엔진은 핸들러 API를 제공하고, MySQL 엔진은 이러한 핸들러 API를 호출하는 구조이기 때문에 필요에 따라 스토리지 엔진이 달라질 수 있다.

또한 MySQL 엔진은 가장 핵심적인 쿼리를 분석하고 최적화하는 역할만 담당하고, 실제 디스크에 접근해 데이터를 읽고 쓰는 역할은 스토리지 엔진에게 위임한다. 

이는 마치 Repository 패턴에서 나타나는 Repository와 DAO의 관계와 유사하다고 볼 수 있다.

**두번째, 하나의 요청에 대해 하나의 스레드를 할당해 처리한다.**
스프링에서는 하나의 Http Request에 대해 하나의 스레드를 할당해 처리한다.

컨트롤러 앞에서 인터셉터와 아규먼트 리졸버가 기본적인 요청의 유효성 검증을 처리하고, 컨트롤러는 요청을 처리할 주체에게 메시지를 전달한다.

MySQL 에서도 하나의 요청에 대해 하나의 사용자 스레드를 할당해 처리하기 때문에 유사하다고 볼 수 있다. 

### Q. MySQL에서 글로벌 메모리와 로컬 메모리 둘의 차이는?
A. 글로벌 메모리와 로컬 메모리는 스레드가 공유하는지 여부에 따라 구분이 됩니다. 글로벌 메모리는 많은 스레드에 의해 공유되는 반면, 로컬 메모리는 클라이언트 요청으로 생성된 클라이언트 스레드 별로 생성되고 스레드 간에 공유가 되지 않습니다.

### Q. MySQL 8.0부터는 기존의 플러그인 아키텍처 대신 컴포넌트 아키텍처로 변경이 되었다. 기존 플러그인 아키텍처의 단점은?

A. 
1. 플러그인은 오직 MySQL 서버와 인터페이스할 수 있고, 플러그인끼리는 통신 할수 없다.
2. 플러그인은 MySQL 서버의 변수나 함수를 직접 호출하기 때문에 안전하지 않다.(캡슐화가 적용되지 않음)
3. 플러그인은 상호 의존 관계를 설정할 수 없어서 초기화가 어려움.