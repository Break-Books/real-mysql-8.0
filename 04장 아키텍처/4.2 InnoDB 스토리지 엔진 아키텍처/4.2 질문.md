# 4.2 InnoDB 스토리지 엔진 아키텍처

## InnoDB에서 플러시 시 성능 문제를 고려해서 제시하는 2가지 방법에 대해서 설명해주세요

**첫번째 방법은 플러시 리스트 플러시(Flush-List Flush) 입니다.**
Flush_List 함수를 호출해서 오래전에 변경된 더티페이지들을 순서대로 디스크에 동기화하는 방법입니다.

**두번째 방법은 LRU 리스트 플러시 (LRU-List Flush) 입니다.**
LRU 리스트에서 사용 빈도가 낮은 데이터 페이지들을 제거해서 새로운 페이지들을 읽어올 공간을 만들어내는 방법입니다.

## MySQL 5.6버전부터 버퍼 풀 상태를 백업하는 기능이 도입되었는데요, 이 기능이 필요한 이유는 무엇일까요?

디스크의 데이터가 버퍼 풀에 적재되어 있으면 쿼리 속도가 매우 증가합니다. 하지만 서버를 재시작하는 경우, 적재되어 있는 게 없기 때문에 요청 속도가 매우 느려지는 단점이 있습니다. 따라서 MySQL 서버가 셧다운 되기 전에 백업하고, 시작 시 자동으로 복구하는 기능이 활성화되어 있습니다.

## 체인지 버퍼가 꼭 필요할까요?

체인지 버퍼의 경우 DML 후 보조 인덱스를 최신 상태로 유지하는데 사용되는 상당한 I/O 를 줄일 수 있습니다. 다만 **과거 디스크가 느린 시절에 큰 효과가 있었지만 SSD 등 디스크의 성능이 개선됨에 따라 극적인 성능 개선을 가져오지는 않습니다. 또한 변경 사항이 많을 경우 재부팅, 복구 작업이 지연될 수 있기에 주의해야합니다**. 추가로 이러한 이유 때문인지 Aurora MySQL 의 경우 체인지 버퍼를 사용하지 않습니다.(None 으로 설정되어있으며 변경 불가)

[[MySQL] Innodb Change Buffer를 통한 보조 인덱스 I/O 개선](https://omty.tistory.com/59)

## **DB 튜닝 (Tuning) 이 무엇인지 그리고 튜닝의 3 단계에 대해 설명해 주세요.**

- DB 튜닝이란 DB 의 구조나, DB 자체, 운영체제 등을 조정하여 **DB 시스템의 전체적인 성능을 개선**하는 작업을 말합니다.
- 튜닝은 **DB 설계 튜닝 → DBMS 튜닝 → SQL 튜닝 단계**로 진행할 수 있습니다.
- 1 단계 - DB 설계 튜닝 (모델링 관점)
  - DB 설계 단계에서 성능을 고려하여 설계
  - 데이터 모델링, 인덱스 설계
  - 데이터파일, 테이블 스페이스 설계
  - 데이터베이스 용량 산정
  - **튜닝 사례** - 반정규화, 분산파일배치
- 2 단계 - DBMS 튜닝 (환경 관점)
  - 성능을 고려하여 메모리나 블록 크기 지정
  - CPU, 메모리 I/O 에 관한 관점
  - **튜닝 사례** - Buffer 크기, Cache 크기
- 3 단계 - SQL 튜닝 (App 관점)
  - SQL 작성 시 성능 고려
  - Join, Indexing, SQL Execution Plan
  - **튜닝 사례** - Hash / Join

[[기술면접] 데이터베이스](https://lealea.tistory.com/234)
