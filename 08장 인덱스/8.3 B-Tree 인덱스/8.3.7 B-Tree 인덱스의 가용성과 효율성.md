# 8.3.7 B-Tree 인덱스의 가용성과 효율성

```sql
SELECT * FROM demp_emp
 WHERE dept_no='d002' AND emp_no >= 10114;
```

```sql
SELECT * FROM demp_emp
 WHERE emp_no >= 10114 and dept_no='d002';
```

이 둘 중 무엇이 더 효율적일까?

이처럼 where 문을 사용하는 것을 filtering 이라고 한다.

공식적인 명칭은 아니지만, >=, <= 와 같은 조건을 작업 범위 결정 조건이라고 하고, = 와 같이 단순한 거름 역할만 하는 조건을 filtering 조건이라고 한다.

작업 범위 결정 조건은 많으면 많을수록 쿼리의 성능 조건을 높인다.

## 8.3.7.2 인덱스의 가용성

B-Tree 인덱스의 특징은, 왼쪽 값을 기준해서 오른 쪽으로 정렬되어 있는 것이다.

인덱스에서 왼쪽 값이 없으면 따라서 인덱스 레인지 스캔 방식이 불가능하다.

```sql
SELECT * FROM employees WHERE first_name LIKE '%mer';
```

이건 인덱스 레인지 스캔 방식을 쓸 수 없다.

## 8.3.7.3 가용성과 효율성 판단

기본적으로 B-Tree 인덱스의 특성 상 다음 조건에서는 사용할 수 없다.

- NOT-EQUAL 비교
- LIKE %?? (앞부분을 모르는 경우)
- 스토어드?나 다른 연산자로 인덱스 칼럼이 변형된 경우
- NOT-DETERMINISTIC 속성의 스토어드 함수가 사용됨
- 데이터 타입이 서로 다른 비교 (15장 참조)
- 문자열 데이터의 콜레이션이 다른 경우 (14장 참조)

NULL은 index에 저장되지 않는 것이 일반적이지만 MySQL은 저장한다.

### 작업 범위 결정 조건

```sql
INDEX ix_test (c1, c2, c3 ... cn)
```

- 사용 못함
  - c1이 없거나 사용 못하는 경우
- 사용 가능
  - 1부터 i-1까지는 모두 동등 비교이고 &&
  - i 는 =, <=, >=, LIKE 왼쪽패턴 중 하나인 경우
