# 8.3.6 B-Tree 인덱스의 정렬 및 스캔 방향
## 인덱스의 정렬
MySQL 5.7 버전까지는 컬럼 단위로 정렬 순서를 혼합해서 인덱스를 생성할 수 없었다.    
하지만 MySQL 8.0 버전부터는 정렬 순서를 혼합한 인덱스도 생성할 수 있게 됐다.

### 인덱스 스캔 방향
인덱스 생성 시점에 오름차순 또는 내림차순으로 정렬이 결정된다. 하지만 쿼리가 인덱스를 사용하는 시점에 인덱스를 읽는 방향에 따라 오른차순 또는 내림차순 정렬 효과를 얻을 수 있다.

### 내림차순 인덱스
```sql
CREATE INDEX ix_teamname_userscore ON employees (team_name ASC, user_score DESC);
```
복합 인덱스에서 내림차순과 오름차순이 혼합된 경우, MySQL 8.0에서는 내림차순 인덱스로 해결할 수 있다.
하지만 역순 정렬 쿼리가 정순 정렬 쿼리보다 28.9% 더 시간이 많이 걸린다.  

내부적으로 InnoDB에서 역순 스캔이 느릴 수 밖에 없는 이유
+ 페이지 잠금이 인덱스 정순 스캔에 적합한 구조
+ 페이지 내에서 인덱스 레코드가 단방향으로만 연결된 구조

내림차순 인덱스가 필요한 경우
+ 인덱스를 ORDER BY ...DESC하는 쿼리가 많은 레코드를 조회하면서 빈번하게 실행되는 경우
+ 많은 쿼리가 인덱스의 뒤쪽만 집중적으로 읽어서 인덱스의 특정 페이지 잠금이 병목될 것으로 예상되는 경우 
